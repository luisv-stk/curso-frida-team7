<div class="main-container">
  <!-- Header with user controls -->
  <div class="header-controls">
    <button class="btn btn-outline-light me-3">EN</button>
    <div class="btn-group me-3">
      <button class="btn btn-outline-light dropdown-toggle d-flex align-items-center">
        <img
          src="https://placehold.co/32x32/jpg"
          class="rounded-circle me-2"
          alt="User Image"
          style="width: 32px; height: 32px"
        />
        Jane Doe
      </button>
    </div>
    <button class="btn btn-outline-light">
      <i class="material-icons text-warning">notifications</i>
    </button>
  </div>

  <!-- Left sidebar -->
  <div class="sidebar">
    <div class="sidebar-content">
      <div class="mb-4">
        <i class="material-icons" style="font-size: 48px; color: #ff75f8">emoji_emotions</i>
      </div>
      <h2 class="fw-bold mb-3">CREA TU PROPIO BANCO DE<br />IMÁGENES PERSONALIZADO</h2>
      <p class="mb-4">Nuestro gestor de imágenes con IA facilitará:</p>
      <input type="text" class="form-control mb-3" placeholder="Buscar" />
      <button class="btn btn-outline-light w-100 mb-2">Descargar</button>
      <button class="btn btn-outline-light w-100 mb-4">Clasificar</button>
      <div class="image-grid">
        <img src="/img/Rectangle 13.png" class="grid-image" />
        <img src="/img/Rectangle 14.png" class="grid-image" />
        <img src="/img/Rectangle 15.png" class="grid-image" />
        <img src="/img/Rectangle 16.png" class="grid-image" />
        <img src="/img/Rectangle 17.png" class="grid-image" />
        <img src="/img/Rectangle 18.png" class="grid-image" />
      </div>
    </div>
  </div>

  <!-- Main drop area -->
  <div
    class="drop-area"
    [class.drag-over]="isDragOver"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
    (click)="onDropAreaClick()">

    <!-- Loading Spinner -->
    <div class="spinner-container" *ngIf="isLoading">
      <mat-spinner diameter="60" color="accent"></mat-spinner>
      <p class="loading-text">Cargando imágenes...</p>
    </div>

    <!-- Show upload prompt when no images -->
    <div class="drop-content" *ngIf="imagePreviewUrls.length === 0 && !isLoading">
      <div class="drop-text">
        <span class="plus-sign">+</span>
        <span class="drop-instruction">
          Arrastra varias imágenes<br />(o selecciona una carpeta)
        </span>
      </div>
    </div>

    <!-- Show uploaded images -->
    <div class="uploaded-images" *ngIf="imagePreviewUrls.length > 0 && !isLoading">
      <div class="image-preview-grid">
        <div
          *ngFor="let imageUrl of imagePreviewUrls; let i = index"
          class="image-preview-container">
          <img
            [src]="imageUrl"
            [alt]="'Imagen subida ' + (i + 1)"
            class="preview-image" />
          <button
            class="delete-image-btn"
            (click)="removeImage(i, $event)"
            type="button"
            aria-label="Eliminar imagen">
            <i class="material-icons">close</i>
          </button>
        </div>
      </div>
      <div class="upload-more-text">
        <span class="plus-sign-small">+</span>
        <span class="upload-more-instruction">Haz clic para subir más imágenes</span>
      </div>
    </div>

    <!-- Hidden file input -->
    <input
      type="file"
      id="fileInput"
      multiple
      accept="image/*"
      style="display: none;"
      (change)="onFileInputChange($event)" />
  </div>
</div>
